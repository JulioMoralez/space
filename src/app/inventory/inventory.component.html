<button class="btn btn-outline-info  " type="submit" (click)="game.start()">Запустить</button>
{{game.globalCount}}
{{game.credits.toFixed(1)}} cr.
<table>
  <tr>
    <td>
      <button [ngClass]="game.menu === Menu.TARGET ? menuButton1() : menuButton2()" type="submit" (click)="viewTarget()">Цель</button>
    </td>
    <td>
      <button [ngClass]="game.menu === Menu.STAT ? menuButton1() : menuButton2()" type="submit" (click)="viewStat()">Характеристики</button>
    </td>
    <td>
      <button [ngClass]="game.menu === Menu.MAP ? menuButton1() : menuButton2()" type="submit" (click)="viewStarmap()">Карта</button>
    </td>
  </tr>
  <tr>
    <td>
      <button [ngClass]="game.menu === Menu.INVENTORY ? menuButton1() : menuButton2()" type="submit" (click)="viewInventory()">Инвентарь</button>
    </td>
    <td>
      <button [ngClass]="game.menu === Menu.TRADE ? menuButton1() : menuButton2()" type="submit" (click)="viewTrade()">Торговля</button>
    </td>
  </tr>
</table>

<div class="my-3" *ngIf="game.menu === Menu.MAP">
  <input class="mx-2" type="text" placeholder="Название" [(ngModel)]="game.searchField.name"/>
  <input class="mx-2" type="text" placeholder="Уровень" [(ngModel)]="game.searchField.techLevel"/>
  <div *ngIf="game.starmap.target !== -1">
    <div>Название системы: {{game.solars[game.starmap.target].name}}</div>
    <div>Тип экономики: {{game.solars[game.starmap.target].economy.name}}</div>
    <div>Богатство: {{game.solars[game.starmap.target].riches.name}}</div>
    <div>Технический уровень:  {{game.solars[game.starmap.target].techLevel}}</div>
    <div *ngIf="game.starmap.target !== game.currentSystem">Расстояние: {{game.starmap.hyperjumpDistance}}</div>
    <div *ngIf="game.starmap.target === game.currentSystem">Вы находитесь в этой системе</div>
    <button class="btn btn-outline-info" [disabled]="!((game.playerShip.currentFuel >= game.starmap.hyperjumpDistance) &&
                                                      (game.starmap.target !== -1) &&
                                                      (game.starmap.target !== game.currentSystem) &&
                                                      (game.playerShip.state !== State.DOCK))" type="submit" (click)="game.hyperjumpStartAnim()">Гиперпрыжок</button>
  </div>
</div>

<div class="my-3" *ngIf="game.menu === Menu.TARGET">
  <div>Название системы: {{game.solars[game.starmap.target].name}}</div>
  <div>Тип экономики: {{game.solars[game.starmap.target].economy.name}}</div>
  <div>Богатство: {{game.solars[game.starmap.target].riches.name}}</div>
  <div>Технический уровень:  {{game.solars[game.starmap.target].techLevel}}</div>
  <div *ngIf="game.playerShip.target !== null">
    {{game.playerShip.target.name}}
    <div *ngIf="game.playerShip.state !== State.DOCK">
      <div>
        <button [ngClass]="this.bstyle0" type="submit" (click)="game.moveToTarget()">Движение к цели</button>
      </div>
      <div>
        <button [ngClass]="this.bstyle0" type="submit" (click)="game.followToTarget()">Движение за целью</button>
      </div>
      <div *ngIf="isPlanet(game.playerShip.target)">
        <button [ngClass]="this.bstyle0" type="submit" (click)="game.dock()">Стыковка</button>
      </div>
      <div>
        <button [ngClass]="this.bstyle0" type="submit" (click)="game.fireRocket()">Выстрел 1</button>
      </div>
      <div>
        <button [ngClass]="this.bstyle0" type="submit" (click)="game.fireLaser()">Выстрел 2</button>
      </div>
      <div>
        <button [ngClass]="this.bstyle2" type="submit" (click)="game.povorot(-10)">A</button>
        <button [ngClass]="this.bstyle2" type="submit" (click)="game.povorot(10)">D</button>
        <button [ngClass]="this.bstyle2" type="submit" (click)="game.forward(5)">W</button>
        <button [ngClass]="this.bstyle2" type="submit" (click)="game.forward(-5)">S</button>
      </div>
    </div>
    <div *ngIf="game.playerShip.state === State.DOCK">
      <button [ngClass]="this.bstyle0" type="submit" (click)="game.undock()">Вылет</button>
    </div>
  </div>
  <button *ngIf="game.playerShip.state === State.JUMP" class="btn btn-outline-info" type="submit" (click)="game.hyperjumpCancel()">Отмена прыжка</button>
</div>

<div class="my-3" *ngIf="game.menu === Menu.TRADE">
  <div *ngIf="game.playerShip.state === State.DOCK">
    <table class="table">
      <thead class="bg-info">
      <tr>
        <th>Наименование</th>
        <th>Цена</th>
        <th></th>
        <th>В трюме</th>
      </tr>
      </thead>
      <tr class="table-info" *ngFor="let good of game.goods; let i=index">
        <td style="padding: 1px 10px">{{good.name}}</td>
        <td style="padding: 1px 10px">{{getPrice(good.id)}}</td>
        <td style="padding: 1px">
          <button [ngClass]="this.bstyle3" style="padding: 0" type="submit" (click)="minusGoods(i, getPrice(good.id))">-</button>
          <button [ngClass]="this.bstyle3" style="padding: 0" type="submit" (click)="plusGoods(i, getPrice(good.id))">+</button>
          <button [ngClass]="this.bstyle3" style="padding: 0" type="submit" (click)="plusplusGoods(i, getPrice(good.id))">++</button>
        </td>
        <td style="padding: 1px 10px">{{game.goodsInBay[i]}}</td>
      </tr>
    </table>
    <div>
      Свободно: {{game.playerShip.maxVolume - game.playerShip.currentVolume}}
    </div>
    <div class="progress"  style="height: 30px;">
      <div class="progress-bar bg-info" role="progressbar" style="width: {{game.playerShip.currentVolume * 100 / game.playerShip.maxVolume}}%" aria-valuemin="0" aria-valuemax="100">
        {{game.playerShip.currentVolume}} / {{game.playerShip.maxVolume}}
      </div>
    </div>
    <div class="my-3">
      <button [ngClass]="this.bstyle0" type="submit" (click)="minusAllGoods()">Продать весь товар</button>
    </div>
  </div>
  <div *ngIf="game.playerShip.state !== State.DOCK">
    Товары
  </div>
</div>

<div class="my-3" *ngIf="game.menu === Menu.STAT">
 <table>
   <tr>
     <td>
       Броня
     </td>
     <td>
       {{game.playerShip.currentHp.toFixed(1)}} / {{game.playerShip.maxHp}}
     </td>
     <td *ngIf="game.playerShip.state === State.DOCK">
       <button [ngClass]="this.bstyle0" [disabled]="game.playerShip.currentHp === game.playerShip.maxHp" type="submit" (click)="repair()">Починить</button>
     </td>
   </tr>
   <tr>
     <td>
       Щит
     </td>
     <td>
       {{game.playerShip.currentShield.toFixed(1)}} / {{game.playerShip.maxShield}}
     </td>
   </tr>
   <tr>
     <td>
       Восстановление щита
     </td>
     <td>
       {{game.playerShip.maxAccShield.toFixed(1)}}
     </td>
   </tr>
   <tr>
     <td>
       Скорость
     </td>
     <td>
       {{game.playerShip.currentSpeed.toFixed(1)}} / {{game.playerShip.maxSpeed}}
     </td>
   </tr>
   <tr>
     <td>
       Ускорение
     </td>
     <td>
       {{game.playerShip.accSpeed.toFixed(1)}}
     </td>
   </tr>
   <tr>
     <td>
       Энергосистема
     </td>
     <td>
       {{game.playerShip.currentEnergy.toFixed(1)}} / {{game.playerShip.maxEnergy}}
     </td>
   </tr>
   <tr>
     <td>
       Восстановление энергии
     </td>
     <td>
       {{game.playerShip.maxAccEnergy.toFixed(1)}}
     </td>
   </tr>
   <tr>
     <td>
       Грузовой отсек
     </td>
     <td>
       {{game.playerShip.currentCargo}} / {{game.playerShip.maxCargo}}
     </td>
   </tr>
   <tr>
     <td>
       Товары
     </td>
     <td>
       {{game.playerShip.currentVolume}} / {{game.playerShip.maxVolume}}
     </td>
   </tr>
   <tr>
     <td>
       Топливо
     </td>
     <td>
       {{game.playerShip.currentFuel.toFixed(1)}} / {{game.playerShip.maxFuel}}
     </td>
     <td *ngIf="game.playerShip.state === State.DOCK">
       <button [ngClass]="this.bstyle0" [disabled]="game.playerShip.currentFuel === game.playerShip.maxFuel" type="submit" (click)="addFuel()">Заправить</button>
     </td>
   </tr>
   <tr>
     <td>
       Ракеты
     </td>
     <td>
       {{game.playerShip.currentRocket}} / {{game.playerShip.maxRocket}}
     </td>
     <td *ngIf="game.playerShip.state === State.DOCK">
       <button [ngClass]="this.bstyle0" [disabled]="game.playerShip.currentRocket === game.playerShip.maxRocket" type="submit" (click)="addRocket()">Купить</button>
     </td>
   </tr>
 </table>
</div>

  <div class="my-3" *ngIf="game.menu === Menu.INVENTORY">
    <table>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.ARMOR)" type="submit" (click)="getInfo(Equip.ARMOR)">Броня</button>
        </td>
        <td rowspan="8" width="380" style="position: relative">
          <div class="rounded" style="background-color: #17a2b8;
                                      position:absolute;
                                      top:0;
                                      left:0;
                                      width:100%;
                                      height:100%;">
            <div style="margin-left: 50px; margin-top: 50px">
              {{this.name}} Стоимость: {{this.price}}
              <ul>
                <li *ngFor="let st of this.info">
                  {{st}}
                </li>
              </ul>
            </div>
          </div>

        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.CAPACITOR)" type="submit" (click)="getInfo(Equip.CAPACITOR)">Энергосистема</button>
        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.LASERGUN)" type="submit" (click)="getInfo(Equip.LASERGUN)">Лазер</button>
        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.SHIELD)" type="submit" (click)="getInfo(Equip.SHIELD)">Щит</button>
        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.ENGINE)" type="submit" (click)="getInfo(Equip.ENGINE)">Двигатель</button>
        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.CARGOBAY)" type="submit" (click)="getInfo(Equip.CARGOBAY)">Грузовой отсек</button>
        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.ROCKETLAUNCHER)" type="submit" (click)="getInfo(Equip.ROCKETLAUNCHER)">Ракетная установка</button>
        </td>
      </tr>
      <tr>
        <td>
          <button [ngClass]="bstyle1" [disabled]="!this.game.playerShip.equipments.has(Equip.FUELTANK)" type="submit" (click)="getInfo(Equip.FUELTANK)">Топливный бак</button>
        </td>
      </tr>

    </table>

    <br>
    <div *ngIf="game.playerShip.state === State.DOCK">
      <button [ngClass]="this.bstyle1" [disabled]="game.trade !== Trade.SHIP && game.trade !== Trade.INVENTORY || equipment.type === Equip.CONTAINER"
              type="submit" (click)="changeE()">{{changeStr}}</button>
          <button [ngClass]="this.bstyle1" [disabled]="game.trade !== Trade.INVENTORY" type="submit" (click)="sell()">Продать</button>
          <button [ngClass]="this.bstyle1" [disabled]="game.trade !== Trade.MARKET" type="submit" (click)="buy()">Купить</button>
    </div>
    <table  valign="top" align="center">
      <tr>
        <td style="vertical-align:top">
          <table border="0" align="center" cellpadding="4"  table-layout="fixed" >
            <tr>
              <td>
                <div>Грузовой отсек</div>
              </td>
            </tr>
            <tr *ngFor="let jj of [].constructor(this.game.playerShip.maxCargo / 4); let j=index">
              <td>
              <span *ngFor="let thing of game.inventory; let i=index">
                  <button *ngIf="i % (this.game.playerShip.maxCargo / 4) === j" [ngClass]="this.bstyle2" [disabled]="game.inventory[i] === game.emptyEquipment" type="submit" (click)="getInfoFromInv(i)">{{thing.label}}</button>
              </span>
              </td>
            </tr>
          </table>
        </td>
        <td>
          <div *ngIf="game.playerShip.state === State.DOCK">
            <table border="0" align="center" cellpadding="4"  table-layout="fixed">
              <tr>
                <td>
                  <div>Магазин</div>
                </td>
              </tr>
              <tr *ngFor="let jj of [].constructor(8); let j=index">
                <td>
                <span *ngFor="let thing of game.market; let i=index">
                    <button *ngIf="i % 8 === j" [ngClass]="this.bstyle2" [disabled]="game.market[i] === game.emptyEquipment" type="submit" (click)="getInfoFromMarket(i)">{{thing.label}}</button>
                </span>
                </td>
              </tr>
            </table>
          </div>
        </td>
      </tr>
    </table>

</div>



